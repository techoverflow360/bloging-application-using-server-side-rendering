<!DOCTYPE html>
<html lang="en">

<head>
    <%- include('./partials/head') %>
        <title>Blog</title>
</head>

<body>
    <%- include('./partials/nav') %>

    <div class="container mt-4">
        <h1><%= blog.title %></h1>
        <%
                                // Extract username from email (assuming email format is username@domain)
                                const username = user.email.split('@')[0];

                                // Construct the image path relative to the public folder
                                const imagePath = `/uploads/${username}/${blog.coverImageURL}`;
                            %>
        <img src="<%= imagePath %>" alt="image not found" width="700px" height="700px"/>
        <p><%= blog.body %></p>
    </div>

    <div class="container mt-3">
        <h1>Comments</h1>
        <form action='/blog/comment/<%=blog._id%>' method="post">
            <div class="mb-3">
                <input type="text" name="content" placeholder="Enter Your Comment" id="content"/>
                <button type="submit">Add Comment</button>
            </div>
        </form>
    </div>
    <div class="container mt-4">
        <h1>All Comments : </h1>
        <% comments.forEach(comment => {  %>
            <div class="mt-2">
                <p><%= comment.content %></p>
                <p>By : <%= comment.createdBy.fullName %></p>
            </div>
        <% }) %>
    </div>

    <%- include('./partials/scripts') %>
</body>
</html>